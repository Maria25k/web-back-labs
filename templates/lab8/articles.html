{% extends "base.html" %}

{% block lab %}–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ 8 - –ú–æ–∏ —Å—Ç–∞—Ç—å–∏{% endblock %}

{% block main %}
<h1>–°—Ç–∞—Ç—å–∏</h1>

<div style="margin-bottom: 20px;">
    <a href="/lab8/create">
        <button>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Å—Ç–∞—Ç—å—é</button>
    </a>
    
    <form action="/lab8/search" method="get" style="display: inline-block; margin-left: 20px;">
        <input type="text" name="q" placeholder="–ü–æ–∏—Å–∫ —Å—Ç–∞—Ç–µ–π..." style="padding: 8px; width: 300px;">
        <button type="submit">–ù–∞–π—Ç–∏</button>
    </form>
</div>

<h2>–ú–æ–∏ —Å—Ç–∞—Ç—å–∏</h2>
<div class="article-list">
    {% if user_articles %}
        {% for article in user_articles %}
            <div class="article-item">
                <div class="article-title">{{ article.title }}</div>
                <div class="article-meta">
                    {% if article.is_favorite %}‚≠ê –ò–∑–±—Ä–∞–Ω–Ω–∞—è | {% endif %}
                    {% if article.is_public %}üåê –ü—É–±–ª–∏—á–Ω–∞—è | {% endif %}
                    üëç {{ article.likes }} –ª–∞–π–∫–æ–≤
                </div>
                <div>{{ article.article_text[:200] }}{% if article.article_text|length > 200 %}...{% endif %}</div>
                <div class="article-actions">
                    <a href="/lab8/edit/{{ article.id }}">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                    <a href="/lab8/delete/{{ article.id }}" 
                       onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É —Å—Ç–∞—Ç—å—é?')">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</a>
                </div>
            </div>
        {% endfor %}
    {% else %}
        <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —Å—Ç–∞—Ç–µ–π. <a href="/lab8/create">–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—É—é!</a></p>
    {% endif %}
</div>

{% if public_articles %}
    <h2>–ü—É–±–ª–∏—á–Ω—ã–µ —Å—Ç–∞—Ç—å–∏ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h2>
    <div class="article-list">
        {% for article in public_articles %}
            <div class="article-item">
                <div class="article-title">{{ article.title }}</div>
                <div class="article-meta">
                    üëç {{ article.likes }} –ª–∞–π–∫–æ–≤
                </div>
                <div>{{ article.article_text[:200] }}{% if article.article_text|length > 200 %}...{% endif %}</div>
            </div>
        {% endfor %}
    </div>
{% endif %}
{% endblock %}